# Routes-Map

- :green_circle: - задача реализована;
- :red_circle: - ззадача **не** реализована;
---
В проекте использованы: **``OpenLayers`` ``React`` ``Redux-Toolkit`` ``Axios`` ``MUI``**

Основные задачи:
- :green_circle: страница создана с использованием **React**;
- :green_circle: На странице отображается карта с использованием **OpenLayers**;
- :green_circle: на карте есть стандартные кнопки управления **Zoom Sliders**;
- :green_circle: У карты есть бургер-меню со списком маршрутов(выбор/отмена управляется кликом по маршруту);
- :green_circle: Загрузка списка маршрутов производится при запуске страницы. Загрузка данных при выборе маршрута производится каждый раз заново;
- :green_circle: Страница получает данные через **Web Api**.
- :green_circle: При выборе маршрута он отображается на карте в виде **LineString** и **MultiPoints** цвета указанного в настройках маршрута, шириной 2 px. Каждая точка маршрута отображается окружностью 3px.
- :red_circle: **Overlay** не реализован т.к. не хватило времени. Сама суть понятна: new Overlay с привязанной формой, и отслеживание кликов по точкам. Но дьявол кроется в деталях, и сейчас я не очень понимаю как отслеживать отдельный **Point** в **MultiPoints** и на фактическое рассмотрение нужно больше времени:)Возможно вместо MultiPoints нужно было написать какой-то цикл Point'ов, к которому бы привязывался Overlay с формой. Сейчас это кажется логичным... Оставим для другого раза:)

**Ссылка на хостинг : https://olmaps-react.onrender.com/ **
## Дополнительные задачи

Дополнительные задачи не обязательны к выполнению, вы их можете реализовать при желании, будет плюсом при выборе.

- :green_circle: Пометить точки начала и конца маршрута специальными маркерами, к примеру два флажка разного цвета;
- :yellow_circle: На линии маршрута заменить отображение точек маршрута на стрелочки, которые будут показывать направление движения(сделал на 50 процентов, заменив точки на изображение стрелочки, но rotation из OpenLayers Examples у меня в проекте не очень работал); 
- :red_circle: Сделать объединение точек маршрута при отдалении масштаба для избавления от нагромождения обозначений точек. При нажатии на объединение выводиться окно с данными первой точки в объединении, иконка используется такая же, как и для обычного события, направление движения первого события;
- :red_circle: Добавить проигрывать движения по траектории **Marker Animation**;


#### Описание файлов с сервера

https://janti.ru:5381/Main/GetRoutes (без параметров) - Возвращает список маршрутов (5 шт). Результат json массив структур 
```json
[
	{"id":1,"name":"Маршрут 1","color":"#6A5ACD"},
	{"id":2,"name":"Маршрут 2","color":"#32CD32"},
	{"id":3,"name":"Маршрут 3","color":"#CD5C5C"},
	{"id":4,"name":"Пустой маршрут","color":"#C71585"},
	{"id":5,"name":"Данные не найдены (ошибка)","color":"#00CDCD"}
]
```
где:
- ``id``     - идентификатор маршрута
- ``name``   - наименование маршрута
- ``color``  - цвет в формате hex, для вывода линии и точек маршрута

https://janti.ru:5381/Main/GetRouteData?id=3 (параметр int id) - Возвращает данные траектории движения, по указанному идентификатору маршрута, в формате:
```json
[	
    {"time":1673704832,"lon":76.58818333333333,"lat":66.080085,"course":130,"speed":0},
    {"time":1673747252,"lon":77.32884166666666,"lat":65.95150833333334,"course":117,"speed":15}
]
```
где:
- ``time``   - время события в формате UNIX
- ``lon``    - координата долготы в проекции WGS84
- ``lat``    - координата широты в проекции WGS84
- ``course`` - направление движения от 0 до 360 (0 или 360 - движется на север)
- ``speed``  - скорость движения км/ч



